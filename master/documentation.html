<?xml version="1.1" encoding="utf-8"?><!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>PDOauth documentation</title>
      <link rel="stylesheet" type="text/css" href="../static/docbook.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
   </head>
   <body>
      <div class="article">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title"><a id="d54e1"></a>PDOauth documentation
                  </h2>
               </div>
            </div>
            <hr />
         </div>
         <div class="toc">
            <p><strong>Table of Contents</strong></p>
            <dl class="toc">
               <dt><span class="section"><a href="#d54e25">Interfaces</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#d54e28">login</a></span></dt>
                     <dt><span class="section"><a href="#d54e33">ssl_login</a></span></dt>
                     <dt><span class="section"><a href="#d54e38">authorization_code</a></span></dt>
                     <dt><span class="section"><a href="#d54e44">keygen</a></span></dt>
                     <dt><span class="section"><a href="#d54e49">deregister</a></span></dt>
                     <dt><span class="section"><a href="#d54e54">deregister_doit</a></span></dt>
                     <dt><span class="section"><a href="#d54e59">logout</a></span></dt>
                     <dt><span class="section"><a href="#d54e64">token</a></span></dt>
                     <dt><span class="section"><a href="#d54e69">showUser</a></span></dt>
                     <dt><span class="section"><a href="#d54e74">changePassword</a></span></dt>
                     <dt><span class="section"><a href="#d54e80">sendPasswordResetEmail</a></span></dt>
                     <dt><span class="section"><a href="#d54e85">updateHash</a></span></dt>
                     <dt><span class="section"><a href="#d54e90">passwordReset</a></span></dt>
                     <dt><span class="section"><a href="#d54e95">register</a></span></dt>
                     <dt><span class="section"><a href="#d54e100">verifyEmail</a></span></dt>
                     <dt><span class="section"><a href="#d54e105">get_by_email</a></span></dt>
                     <dt><span class="section"><a href="#d54e110">add_assurance</a></span></dt>
                     <dt><span class="section"><a href="#d54e115">add_credential</a></span></dt>
                     <dt><span class="section"><a href="#d54e120">remove_credential</a></span></dt>
                     <dt><span class="section"><a href="#d54e125">uriservice</a></span></dt>
                     <dt><span class="section"><a href="#d54e130">send_static</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="section"><a href="#d54e135">Functionality</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#d54e138">End user registration and login with facebook</a></span></dt>
                     <dt><span class="section"><a href="#d54e148">New user</a></span></dt>
                     <dt><span class="section"><a href="#d54e156">Ssl auth</a></span></dt>
                     <dt><span class="section"><a href="#d54e170">End user registration</a></span></dt>
                     <dt><span class="section"><a href="#d54e192">End user password reset</a></span></dt>
                     <dt><span class="section"><a href="#d54e200">End user obtaining hash</a></span></dt>
                     <dt><span class="section"><a href="#d54e208">Java script unit</a></span></dt>
                     <dt><span class="section"><a href="#d54e216">End user digest management</a></span></dt>
                     <dt><span class="section"><a href="#d54e226">Keygen</a></span></dt>
                     <dt><span class="section"><a href="#d54e240">Credential integration</a></span></dt>
                     <dt><span class="section"><a href="#d54e284">Email verification</a></span></dt>
                     <dt><span class="section"><a href="#d54e294">Password change</a></span></dt>
                     <dt><span class="section"><a href="#d54e308">Auth provider integration</a></span></dt>
                     <dt><span class="section"><a href="#d54e316">Registration integration</a></span></dt>
                     <dt><span class="section"><a href="#d54e332">Main</a></span></dt>
                     <dt><span class="section"><a href="#d54e340">Login integration</a></span></dt>
                     <dt><span class="section"><a href="#d54e358">Deregister integration</a></span></dt>
                     <dt><span class="section"><a href="#d54e382">Userinfo integration</a></span></dt>
                     <dt><span class="section"><a href="#d54e388">Hash</a></span></dt>
                     <dt><span class="section"><a href="#d54e410">Password reset integration</a></span></dt>
                     <dt><span class="section"><a href="#d54e426">Redirection</a></span></dt>
                     <dt><span class="section"><a href="#d54e433">Server side</a></span></dt>
                     <dt><span class="section"><a href="#d54e449">Assurance integration</a></span></dt>
                     <dt><span class="section"><a href="#d54e459">Key data</a></span></dt>
                     <dt><span class="section"><a href="#d54e475">Facebook</a></span></dt>
                     <dt><span class="section"><a href="#d54e489">Authorisaton</a></span></dt>
                     <dt><span class="section"><a href="#d54e507">Deregister</a></span></dt>
                     <dt><span class="section"><a href="#d54e531">Login</a></span></dt>
                     <dt><span class="section"><a href="#d54e545">Registration</a></span></dt>
                     <dt><span class="section"><a href="#d54e580">Ssl login</a></span></dt>
                     <dt><span class="section"><a href="#d54e615">Web interface</a></span></dt>
                     <dt><span class="section"><a href="#d54e656">Auth provider</a></span></dt>
                     <dt><span class="section"><a href="#d54e679">Token info by access key</a></span></dt>
                     <dt><span class="section"><a href="#d54e693">User</a></span></dt>
                     <dt><span class="section"><a href="#d54e730">Uri service</a></span></dt>
                     <dt><span class="section"><a href="#d54e746">User info</a></span></dt>
                     <dt><span class="section"><a href="#d54e795">Credential</a></span></dt>
                     <dt><span class="section"><a href="#d54e821">Logout</a></span></dt>
                     <dt><span class="section"><a href="#d54e829">Password reset</a></span></dt>
                     <dt><span class="section"><a href="#d54e862">Assurance</a></span></dt>
                     <dt><span class="section"><a href="#d54e886">Application</a></span></dt>
                     <dt><span class="section"><a href="#d54e902">Application tool</a></span></dt>
                     <dt><span class="section"><a href="#d54e918">JavaScript tests</a></span></dt>
                  </dl>
               </dd>
            </dl>
         </div>
         <div class="variablelist">
            <dl class="variablelist">
               <dt><span class="term">Branch:</span></dt>
               <dd>master</dd>
               <dt><span class="term">Commit:</span></dt>
               <dd>f2c0a32a50bb12b9998d9b6ec56a121cc8d56ef9</dd>
               <dt><span class="term">Build:</span></dt>
               <dd>98825897</dd>
            </dl>
         </div>
         <p>
            				See commit log <a class="ulink" href="commitlog.html" target="_top">here</a>.
            			
         </p>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a id="d54e25"></a>Interfaces
                     </h2>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e28"></a>login
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/login', methods=['POST'], formClass=LoginForm, status=403)</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e33"></a>ssl_login
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/ssl_login', methods=['GET'])</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e38"></a>authorization_code
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/oauth2/auth', methods=['GET'], checkLoginFunction=CONTROLLER.redirectIfNotLoggedIn)</p> see http://tech.shift.com/post/39516330935/implementing-a-python-oauth-2-0-provider-part-1
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e44"></a>keygen
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/keygen', methods=['POST'], formClass=KeygenForm)</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e49"></a>deregister
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/deregister', methods=['POST'], formClass=DeregisterForm,
                  checkLoginFunction=CONTROLLER.jsonErrorIfNotLoggedIn)
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e54"></a>deregister_doit
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/deregister_doit', methods=['POST'], formClass=DeregisterDoitForm,
                  checkLoginFunction=CONTROLLER.jsonErrorIfNotLoggedIn)
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e59"></a>logout
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/logout', methods=['GET'], checkLoginFunction=CONTROLLER.jsonErrorIfNotLoggedIn)</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e64"></a>token
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/oauth2/token', methods=['POST'], formClass=TokenInterfaceForm)</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e69"></a>showUser
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/users/&lt;userid&gt;', methods=['GET'], checkLoginFunction=CONTROLLER.authenticateUserOrBearer)</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e74"></a>changePassword
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/users/me/change_password', methods=['POST'], formClass=PasswordChangeForm,
                  checkLoginFunction=CONTROLLER.jsonErrorIfNotLoggedIn)
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e80"></a>sendPasswordResetEmail
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/users/&lt;email&gt;/passwordreset', methods=['GET'])</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e85"></a>updateHash
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/users/me/update_hash', methods=['POST'], formClass=DigestUpdateForm,
                  checkLoginFunction=CONTROLLER.jsonErrorIfNotLoggedIn)
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e90"></a>passwordReset
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/password_reset', methods=['POST'], formClass=PasswordResetForm)</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e95"></a>register
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/register', methods=['POST'], formClass=RegistrationForm)</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e100"></a>verifyEmail
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/verify_email/&lt;emailToken&gt;', methods=['GET'])</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e105"></a>get_by_email
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/user_by_email/&lt;email&gt;', methods=['GET'], checkLoginFunction=CONTROLLER.jsonErrorIfNotLoggedIn)</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e110"></a>add_assurance
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/add_assurance', methods=['POST'], formClass=AssuranceForm,
                  checkLoginFunction=CONTROLLER.jsonErrorIfNotLoggedIn)
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e115"></a>add_credential
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/add_credential', methods=['POST'], formClass=CredentialForm,
                  checkLoginFunction=CONTROLLER.jsonErrorIfNotLoggedIn)
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e120"></a>remove_credential
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/v1/remove_credential', methods=['POST'], formClass=CredentialIdentifierForm,
                  checkLoginFunction=CONTROLLER.jsonErrorIfNotLoggedIn)
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e125"></a>uriservice
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/uris', methods=['GET'])</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e130"></a>send_static
                        </h3>
                     </div>
                  </div>
               </div>
               <p>DECORATOR.interfaceFunc('/static/&lt;path:path&gt;', methods=['GET'])</p>
            </div>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a id="d54e135"></a>Functionality
                     </h2>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e138"></a>End user registration and login with facebook
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">If a user without public email tries to register to facebook we ask for email address.
                        
                     </li>
                     <li class="listitem">It is possible to register with facebook.  </li>
                     <li class="listitem">You can login using facebook.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e148"></a>New user
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Unregistered user can register with password in the middle of login procedure of a
                        served application.  
                     </li>
                     <li class="listitem">Unregistered user can register with facebook in the middle of login procedure of a
                        served application.  
                     </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e156"></a>Ssl auth
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Ssl login logs in if you are registered and have cert.  </li>
                     <li class="listitem">Ssl login registers and logs in if you have cert and give email.  </li>
                     <li class="listitem">No ssl login on base url.  </li>
                     <li class="listitem">The SSl LOGIN BASE URL page works if no cert is given.  </li>
                     <li class="listitem">Normal pages do not ask for cert.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e170"></a>End user registration
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Registration is done by filling out the registration form.  </li>
                     <li class="listitem">If you are not logged in,the authorization uri redirects to login page such that after
                        login you can continue.  
                     </li>
                     <li class="listitem">You can check your data in the ME url.  </li>
                     <li class="listitem">For some forms you need a csrf token,you can obtain it by logging in.  </li>
                     <li class="listitem">An assurer can add assurance to other users using the assurance form.  </li>
                     <li class="listitem">An assurer can get user information using the users email.  </li>
                     <li class="listitem">If you are logged in and all the informations are correct the oauth page redirects
                        to the redirect uri with your authorization code as parameter.  
                     </li>
                     <li class="listitem">The server can get your access tokens using your authorization code. </li>
                     <li class="listitem">The server can get your user info with your access token. </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e192"></a>End user password reset
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">The reset link is in the reset email. </li>
                     <li class="listitem">Password can be reset using the reset link.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e200"></a>End user obtaining hash
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">You can obtain the hash by filling in your personal id and pushing the button near
                        it.  In this case your web browser goes directly to anchor.edemokraciagep.org, and
                        gets the hash for you. The SSO server never sees your personal id.
                     </li>
                     <li class="listitem">Assurer can obtain the hash by filling in your personal id and pushing the button
                        near it.  
                     </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e208"></a>Java script unit
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Javascript unit test run nicely.  </li>
                     <li class="listitem">The me link works.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e216"></a>End user digest management
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">You can add a digest as a logged in user.  </li>
                     <li class="listitem">You can change the digest as a logged in user.  </li>
                     <li class="listitem">You can delete the digest as a logged in user by giving empty one.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e226"></a>Keygen
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">With keygen you get back a certificate.  </li>
                     <li class="listitem">With keygen you get back a certificate for the given email.  </li>
                     <li class="listitem">If the user is logged in,a credential is added to the user for the cert.  </li>
                     <li class="listitem">If createUser is set,a new user is created with the cert and logged in.  </li>
                     <li class="listitem">If the user is logged in and createUser is set,a credential is added to the user for
                        the cert.  
                     </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e240"></a>Credential integration
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Credential can be retrieved by type and identifier.  </li>
                     <li class="listitem">A logged in user can add credential.  </li>
                     <li class="listitem">A not logged in user cannot add credential.  </li>
                     <li class="listitem">The added credential should contain credentialType.  </li>
                     <li class="listitem">The added credential should contain valid credentialType.  </li>
                     <li class="listitem">The added credential should contain identifier.  </li>
                     <li class="listitem">The added credential should contain valid identifier.  </li>
                     <li class="listitem">The added credential should contain secret.  </li>
                     <li class="listitem">The password should be at least 8 characters long.  </li>
                     <li class="listitem">The password should contain lowercase letters.  </li>
                     <li class="listitem">The password should contain uppercase letters.  </li>
                     <li class="listitem">Cannot add an already existing identifier.  </li>
                     <li class="listitem">A credential can be deleted.  </li>
                     <li class="listitem">The credential is actually deleted.  </li>
                     <li class="listitem">You can delete certificate credential.  </li>
                     <li class="listitem">You should give the credentialType for credential deletion.  </li>
                     <li class="listitem">You should give valid credentialType for credential deletion.  </li>
                     <li class="listitem">You should give the identifier for credential deletion.  </li>
                     <li class="listitem">You should give valid identifier for credential deletion.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e284"></a>Email verification
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Email validation gives emailverification assurance.  </li>
                     <li class="listitem">Email verification after expiry will fail.  </li>
                     <li class="listitem">Bad email uri signals error.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e294"></a>Password change
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Change password returns 200 and a success message.  </li>
                     <li class="listitem">Change password does change password.  </li>
                     <li class="listitem">Change password needs csrf.  </li>
                     <li class="listitem">Change password for self needs old password.  </li>
                     <li class="listitem">Old password for self should be correct.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e308"></a>Auth provider integration
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Authorization code cannot be obtained without user.  </li>
                     <li class="listitem">Auth interface redirects to redirect uri.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e316"></a>Registration integration
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">You can register with username,password,email and hash.  </li>
                     <li class="listitem">User cannot register twice with same email.  </li>
                     <li class="listitem">Registration is impossible without email.  </li>
                     <li class="listitem">Password registration needs good password.  </li>
                     <li class="listitem">Registration should give a credential type.  </li>
                     <li class="listitem">Registration should give an identifier.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e332"></a>Main
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Root uri have no function.  </li>
                     <li class="listitem">Static files are served.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e340"></a>Login integration
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Login does not accept get.  </li>
                     <li class="listitem">Password login needs identifier.  </li>
                     <li class="listitem">Password login needs secret.  </li>
                     <li class="listitem">Password login needs correct identifier and secret.  </li>
                     <li class="listitem">Password login needs correct credentialType.  </li>
                     <li class="listitem">User can authenticate on login page.  </li>
                     <li class="listitem">You have to be logged in to log out.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e358"></a>Deregister integration
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">You call deregister to deregister.  </li>
                     <li class="listitem">You need csrf token to deregister.  </li>
                     <li class="listitem">You need valid csrf token to deregister.  </li>
                     <li class="listitem">Deregistration needs a logged in user.  </li>
                     <li class="listitem">You need csrf token and secret for deregister doit.  </li>
                     <li class="listitem">You need secret for deregister doit.  </li>
                     <li class="listitem">You need valid csrf token for deregister doit.  </li>
                     <li class="listitem">Deregistration doit needs a logged in user.  </li>
                     <li class="listitem">You need deregister secret for deregister doit.  </li>
                     <li class="listitem">You need valid deregister secret for deregister doit.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e382"></a>Userinfo integration
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Users without login cannot get user by email.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e388"></a>Hash
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">A logged in user can record its hash.  </li>
                     <li class="listitem">The users hash is changed to the new one.  </li>
                     <li class="listitem">If the user had a hash before,it is overwritten.  </li>
                     <li class="listitem">It is possible to delete the hash by not giving a digest in the request.  </li>
                     <li class="listitem">The assurances are overwritten on hash update.  </li>
                     <li class="listitem">Emailverification assurance is an exception from overwriting.  </li>
                     <li class="listitem">Without login it is not possible to update the hash.  </li>
                     <li class="listitem">The hash update request should contain csrf token.  </li>
                     <li class="listitem">If a hash is given it should be valid.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e410"></a>Password reset integration
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Have passwordreset uri.  </li>
                     <li class="listitem">Password reset link leads to password reset form.  </li>
                     <li class="listitem">Password reset needs password.  </li>
                     <li class="listitem">Password reset needs secret.  </li>
                     <li class="listitem">Password reset secret have to be valid.  </li>
                     <li class="listitem">Valid secret is accepted.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e426"></a>Redirection
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Unauthenticated user is redirected to login page when tries to do oauth with us. 
                        
                     </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e433"></a>Server side
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Authorization code can be obtained by an authenticated user using correct client id
                        and redirect uri.  
                     </li>
                     <li class="listitem">CallMe.  </li>
                     <li class="listitem">You can get user info with authorization code.  </li>
                     <li class="listitem">Token interface does not allow bad parameters.  </li>
                     <li class="listitem">GetCode. </li>
                     <li class="listitem">Auth interface does not allow bad parameters.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e449"></a>Assurance integration
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Assurance form needs csrf.  </li>
                     <li class="listitem">Assurers with appropriate credential can add assurance to user using hash.  the appropriate
                        credential is an assurance in the form "assurer.&lt;assurance_name&gt;" where assurance_name
                        is the assurance to be added
                     </li>
                     <li class="listitem">No madeup csrf cookie.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e459"></a>Key data
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">KeyData can be created with client id,user id,acess key,and,refresh key. </li>
                     <li class="listitem">Access key and refresh key can be retrieved by client id and user id.  </li>
                     <li class="listitem">None is returned for nonexistent client id.  </li>
                     <li class="listitem">None is returned for nonexistent user id.  </li>
                     <li class="listitem">None is returned for none as user id.  </li>
                     <li class="listitem">None is returned for none as client id.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e475"></a>Facebook
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Facebook login needs facebook id and access token.  </li>
                     <li class="listitem">Facebook login needs facebook id as username.  </li>
                     <li class="listitem">Facebook login needs correct access token as password.  </li>
                     <li class="listitem">Facebook login needs facebook credentials as registered.  </li>
                     <li class="listitem">FacebookMe reaches facebook.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e489"></a>Authorisaton
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Authorisation can be created with client id,code and scope. </li>
                     <li class="listitem">Created authorisation can be retrieved using client id and scope.  </li>
                     <li class="listitem">Created authorisation have the client id given.  </li>
                     <li class="listitem">Created authorisation have the code given.  </li>
                     <li class="listitem">Authorisation should have empty scope.  </li>
                     <li class="listitem">Authorisation code expires in configured time.  </li>
                     <li class="listitem">Authorisation code can be retrieved before configured expiry.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e507"></a>Deregister
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">You can deregister with csrf.  </li>
                     <li class="listitem">Calling do deregister sends deregistration email.  </li>
                     <li class="listitem">Deregistration email contains deregistration secret.  </li>
                     <li class="listitem">Deregistration email contains DEREGISTRATION URL.  </li>
                     <li class="listitem">Deregistration doit needs deregistration secret.  </li>
                     <li class="listitem">Deregistration doit works with right secret and csrf.  </li>
                     <li class="listitem">Deregistration doit does not work with bad secret.  </li>
                     <li class="listitem">Your credentials are deleted in deregistration.  </li>
                     <li class="listitem">Your assurances are deleted in deregistration.  </li>
                     <li class="listitem">Your user is deleted in deregistration.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e531"></a>Login
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Password login works with username and password.  </li>
                     <li class="listitem">Login sets the csrf cookie.  </li>
                     <li class="listitem">Inactive user cannot authenticate.  </li>
                     <li class="listitem">Authentication with bad userid is rejected.  </li>
                     <li class="listitem">Authentication with bad secret is rejected.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e545"></a>Registration
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">PrepareLoginForm.   </li>
                     <li class="listitem">Password is stored hashed in registration.  </li>
                     <li class="listitem">On registration a temporary email verification credential is registered.  </li>
                     <li class="listitem">The emailcheck secret is not shown in the registration answer.  </li>
                     <li class="listitem">You can register without hash.  </li>
                     <li class="listitem">You are logged in in registration.  </li>
                     <li class="listitem">Registration sends registration email.  </li>
                     <li class="listitem">Registration email contains registration uri with secret.  </li>
                     <li class="listitem">User cannot register twice with same email address.  </li>
                     <li class="listitem">When a hash is registered which is already used by another user, the user is notified
                        about the fact.  
                     </li>
                     <li class="listitem">When a hash is registered which is already used by another assured user, the user
                        is notified about the fact and registration fails.  
                     </li>
                     <li class="listitem">The emailverification assurance does not count in hash collision.  </li>
                     <li class="listitem">You can register with a generated certificate via keygen.  </li>
                     <li class="listitem">Registration sets the csrf cookie.  </li>
                     <li class="listitem">Ssl registration sets the csrf cookie.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e580"></a>Ssl login
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">There is a SSL LOGIN BASE URL config option containing the base url of the site with
                        the optional no ca config.  
                     </li>
                     <li class="listitem">There is a BASE URL config option containing the plain ssl base url.  where no certificate
                        is asked
                     </li>
                     <li class="listitem">There is a SSL LOGOUT URL config option pointing to a location which is set up with
                        SSLVerifyClient require and SSLVerifyDepth 0 within SSL LOGIN BASE URL.  
                     </li>
                     <li class="listitem">There is a START URL config option which contains the starting point useable for unregistered
                        and or not logged in user.  
                     </li>
                     <li class="listitem">You can login using a registered ssl cert.  </li>
                     <li class="listitem">Ssl login sets csrf cookie.  </li>
                     <li class="listitem">Login cookie have path set to root.  </li>
                     <li class="listitem">Login cookie have domain set to COOKIE DOMAIN.  </li>
                     <li class="listitem">With cert login you get actually logged in.  </li>
                     <li class="listitem">You cannot login using an unregistered ssl cert without email.  </li>
                     <li class="listitem">You cannot login without a cert.  </li>
                     <li class="listitem">Empty certstring gives error.  </li>
                     <li class="listitem">Junk certstring gives error.  </li>
                     <li class="listitem">Ssl login is cors enabled.  </li>
                     <li class="listitem">You can register and login using an unregistered ssl cert with email.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e615"></a>Web interface
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">WebInterface initializes with the given interface.  </li>
                     <li class="listitem">You can getSession.  </li>
                     <li class="listitem">You can getRequest.  </li>
                     <li class="listitem">Request url corresponds to the real request url.  </li>
                     <li class="listitem">User can be logged in with loginInFramework using credential.  </li>
                     <li class="listitem">Logged in user can be obtained with getCurrentUser.  </li>
                     <li class="listitem">Postdata can be put into request context.  </li>
                     <li class="listitem">Facebook interface gives error for bad code.  </li>
                     <li class="listitem">Fake facebookMe returns okay if interface access token equals code.  </li>
                     <li class="listitem">LoginInFramework returns true for active user.  </li>
                     <li class="listitem">Response cookie can be set.  </li>
                     <li class="listitem">Cookie setting sets the header.  </li>
                     <li class="listitem">Cookie domain can be set.  </li>
                     <li class="listitem">Cookie path can be set.  </li>
                     <li class="listitem">ReturnUserAndLoginCookie sets csrf cookie.  </li>
                     <li class="listitem">Headers can be obtained with getHeader.  </li>
                     <li class="listitem">Form can be obtained with getRequestForm.  </li>
                     <li class="listitem">LogOut logs out.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e656"></a>Auth provider
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Code can be obtained in auth interface.  </li>
                     <li class="listitem">Tokens can be obtained in token interface with code.  </li>
                     <li class="listitem">Token interface response contains access token,token type,expires in and refresh token.
                        
                     </li>
                     <li class="listitem">Tokens can be obtained in token interface with refresh token.  </li>
                     <li class="listitem">All parameters for auth interface should be present and correct.  </li>
                     <li class="listitem">Auth interface does not work without login.  </li>
                     <li class="listitem">Bad parameters in token interface lead to errors.  </li>
                     <li class="listitem">Refresh token cannot be obtained with another clients identity.  </li>
                     <li class="listitem">No scope equals empty scope.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e679"></a>Token info by access key
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">TokenInfo can be stored by access key. </li>
                     <li class="listitem">TokenInfo can be retrieved by access key.  </li>
                     <li class="listitem">Find returns None for nonexisting refresh key.  </li>
                     <li class="listitem">Access key expires at given time.  </li>
                     <li class="listitem">There should not be two records with same access key.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e693"></a>User
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">User can be created. </li>
                     <li class="listitem">User id is returned by get id.  </li>
                     <li class="listitem">User email with plus sign is stored correctly.  </li>
                     <li class="listitem">User is created as inactive.  </li>
                     <li class="listitem">User is created as unauthenticated.  </li>
                     <li class="listitem">Inactive user is loaded as inactive.  </li>
                     <li class="listitem">Unauthenticated user is loaded as unauthenticated.  </li>
                     <li class="listitem">User can be activated.  </li>
                     <li class="listitem">User can be set as authenticated.  </li>
                     <li class="listitem">User can be created with credentials.  </li>
                     <li class="listitem">User can be retrieved by id.  </li>
                     <li class="listitem">User email is be stored.  </li>
                     <li class="listitem">User hash can be stored.  </li>
                     <li class="listitem">Cannot create user with already existing email.  </li>
                     <li class="listitem">GetByDigest does not allow empty digest.  </li>
                     <li class="listitem">GetByDigest does not allow null digest.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e730"></a>Uri service
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">The uri service gives back the BASE URL.  </li>
                     <li class="listitem">The uri service gives back the SSL LOGIN BASE URL.  </li>
                     <li class="listitem">The uri service gives back the PASSWORD RESET FORM URL.  </li>
                     <li class="listitem">The uri service gives back the START URL.  </li>
                     <li class="listitem">The uri service gives back the SSL LOGOUT URL.  </li>
                     <li class="listitem">The uri service gives back the ANCHOR URL.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e746"></a>User info
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Logged in user can get its info.  </li>
                     <li class="listitem">Userid returned is the string one.  </li>
                     <li class="listitem">User info contains assurance.  </li>
                     <li class="listitem">User info contains hash.  </li>
                     <li class="listitem">Users with assurer assurance can get email and digest for anyone.  </li>
                     <li class="listitem">Users without assurer assurance cannot get email and digest for anyone.  </li>
                     <li class="listitem">Users with assurer assurance can get user by email.  </li>
                     <li class="listitem">No by email with wrong email.  </li>
                     <li class="listitem">Users without assurer assurance cannot get user by email.  </li>
                     <li class="listitem">User id shown to the application differs from the user id.  </li>
                     <li class="listitem">User id shown to the application does not change over time.  </li>
                     <li class="listitem">Email shown to the application does not change over time.  </li>
                     <li class="listitem">The userid shown for the same user should be different for different applications.
                        
                     </li>
                     <li class="listitem">The email address shown for the same user should be different for different applications.
                        
                     </li>
                     <li class="listitem">The email address shown for the user is userid dot appname at EMAILDOMAIN.  </li>
                     <li class="listitem">The applications do not receive credential data from the user.  </li>
                     <li class="listitem">The applications do not receive hash from the user.  </li>
                     <li class="listitem">For each application there is a list of assurances used by that applications.  </li>
                     <li class="listitem">Assurance list for applications contain the assurances added.  </li>
                     <li class="listitem">If you add the same assurance the second time,it will have no effect.  </li>
                     <li class="listitem">The applications receive intersection of users assurances and applications assurances.
                        
                     </li>
                     <li class="listitem">The applications do not receive anything beyond mapped email address,mapped user id
                        and filtered list of assurance names.  
                     </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e795"></a>Credential
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Credential representation is readable.  </li>
                     <li class="listitem">A logged in user can add credential.  </li>
                     <li class="listitem">When a credential is added the response contains user data which contains her credentials.
                        
                     </li>
                     <li class="listitem">The credential is actually added.  </li>
                     <li class="listitem">A credential can be deleted.  </li>
                     <li class="listitem">Password is stored using sha256 hash.  </li>
                     <li class="listitem">An already existing credential cannot be addedd.  </li>
                     <li class="listitem">The credential used for login cannot be cleared.  </li>
                     <li class="listitem">Certificate credential can be added by a logged in user without email.  </li>
                     <li class="listitem">Certificate credential can be added by a logged in user with email.  </li>
                     <li class="listitem">Certificate credential can removed.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e821"></a>Logout
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">You can log out.  </li>
                     <li class="listitem">If you log out you will be logged out.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e829"></a>Password reset
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Password reset email is sent to valid email.  </li>
                     <li class="listitem">Password reset email send returns success message.  </li>
                     <li class="listitem">Password reset email subject is okay.  </li>
                     <li class="listitem">The reset link is in the reset email in correct form.  </li>
                     <li class="listitem">Password reset link contains correct secret.  </li>
                     <li class="listitem">Password reset credential have 4 hours expiration time.  </li>
                     <li class="listitem">Password reset email send for invalid email fails.  </li>
                     <li class="listitem">Successful password reset sets the password.  </li>
                     <li class="listitem">CreatePasswordResetFormWithSecret. </li>
                     <li class="listitem">DoPasswordReset. </li>
                     <li class="listitem">Successful password clears the temporary credential.  </li>
                     <li class="listitem">No password reset for timed out temporary credential.  </li>
                     <li class="listitem">CountExpiredCreds. </li>
                     <li class="listitem">Bad secret clears up all timed out temporary credentials.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e862"></a>Assurance
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">PrepareLoginForm.     </li>
                     <li class="listitem">Assurers with appropriate credential can add assurance to user using hash.  </li>
                     <li class="listitem">Adding assurance is possible using the hash only.  </li>
                     <li class="listitem">Assurers need assurer assurance.  </li>
                     <li class="listitem">Assurers need giving assurance.  that is they have to have assurance.[the assurance
                        to give]
                     </li>
                     <li class="listitem">When an assurer wants to add an assurance for a user with hash and without email,
                        and there are multiple users with that hash, then an error is signaled.  
                     </li>
                     <li class="listitem">When an assurance added with hash and email, and there is another user with the same
                        hash, the hash from the other user is deleted.  
                     </li>
                     <li class="listitem">Adding assurance with invalid hash and email fails.  </li>
                     <li class="listitem">Adding assurance with invalid hash and no email fails.  </li>
                     <li class="listitem">Adding assurance with email and hash of someone other fails.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e886"></a>Application
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">The application name is stored as given.  </li>
                     <li class="listitem">An application can be stored and retrieved.  </li>
                     <li class="listitem">The name of the application must be unique.  </li>
                     <li class="listitem">The name of the application must be unique case 2.  </li>
                     <li class="listitem">The redirect uri is stored as given.  </li>
                     <li class="listitem">The redirect uri must be https.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e902"></a>Application tool
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">RunApplicationToolWithParameters.  </li>
                     <li class="listitem">Applicationtool gives error if no parameters are given.  </li>
                     <li class="listitem">Applicationtool gives help for dash dash help.  </li>
                     <li class="listitem">Applicationtool works with a name a https redrect uri a secret and an assurance. 
                        
                     </li>
                     <li class="listitem">Applicationtool works with a name a https redrect uri a secret and two assurances.
                        
                     </li>
                     <li class="listitem">Applicationtool refuses http uri.  </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a id="d54e918"></a>JavaScript tests
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">Should return an array of query strings contained in url.</li>
                     <li class="listitem">Ajaxbase() should return with a xmlhttp object - IE style httpRequest.</li>
                     <li class="listitem">Ajaxbase() should return with a xmlhttp object - non IE style httpRequest.</li>
                     <li class="listitem">Xmlhttp.onreadystatechange() should call the callback according the value of the 'readyState'
                        property.
                     </li>
                     <li class="listitem">Ajaxpost() can be mocked.</li>
                     <li class="listitem">Ajaxget() can be mocked.</li>
                     <li class="listitem">Message is returned in message property.</li>
                     <li class="listitem">Errors is returned in error property.</li>
                     <li class="listitem">Assurances, email and userid are returned in success property.</li>
                     <li class="listitem">The modal div should be able to appear.</li>
                     <li class="listitem">The modal div shouldn't be shown if its argument contains no data.</li>
                     <li class="listitem">With displayMsg() the text comes in the input data should be shown in their dedicated
                        div element.
                     </li>
                     <li class="listitem">With closePopup() the modal div should hide, erase its child divs and the callback
                        function should be callable.
                     </li>
                     <li class="listitem">The modal div should be hideable with close button click.</li>
                     <li class="listitem">The callback function should be injected into the close button onclick function as
                        argument.
                     </li>
                     <li class="listitem">The onclick function shouldn't get any argumentum if msg.callback is missing or empty.</li>
                     <li class="listitem">Should parse the userdata contained an object to html.</li>
                     <li class="listitem">Shouldn't redirect if the status isn't equal 200.</li>
                     <li class="listitem">Shouldn't redirect if the status is 200 but no next key or value is given in query
                        string.
                     </li>
                     <li class="listitem">Should redirect with 'next' query var comes in url if status=200.</li>
                     <li class="listitem">Should display the processed data through processErrors() and displayMsg(), popop
                        callback should have the get me().
                     </li>
                     <li class="listitem">Should call '/v1/users/me' trough AJAX.</li>
                     <li class="listitem">Should set visibility of the menutabs according the user rights - no autorization.</li>
                     <li class="listitem">Should set the visibility of the menutabs according the user rights - Any other message.</li>
                     <li class="listitem">Should set the visibility of the menu tabs according the user rights - user without
                        'assurer' assurance and credentials.
                     </li>
                     <li class="listitem">Hides account and assurer menutabs and shows login and registration if the html status
                        not 200.
                     </li>
                     <li class="listitem">PasswordReset calls /v1/password reset with secret and password.</li>
                     <li class="listitem">Calls AJAX with method 'GET' on uri /v1/users/'email'/passwordreset.</li>
                     <li class="listitem">Login() calls /login with 'password' as credential type, username and password.</li>
                     <li class="listitem">Error message should be shown if the input fields are empty, AJAX shouldn't be called.</li>
                     <li class="listitem">SslLogin() should redirect to the SSL LOGIN BASE URL uri.</li>
                     <li class="listitem">Login with facebook calls /login with facebook as credential type, userid and access
                        token.
                     </li>
                     <li class="listitem">[ Must be implemented!! ] Should logging in with google account.</li>
                     <li class="listitem">[ Must be implemented!! ] Should logging in with twitter account.</li>
                     <li class="listitem">ByEmail() should request the server for the data of the user selected by Email.</li>
                     <li class="listitem">AddAssurance() should call '/v1/add assurance' with digest, assurance and email.</li>
                     <li class="listitem">Logout() should call AJAX with method 'GET' on uri /logout and callback should be
                        logoutCallback().
                     </li>
                     <li class="listitem">LogoutCallback() should display the response comes from the server.</li>
                     <li class="listitem">DoLoadHome() should redirect to the location contained in the QueryString.uris.START
                        URL.
                     </li>
                     <li class="listitem">Should fill the 'QeryString.uris' array with the datas have coming from the URi service
                        of server.
                     </li>
                     <li class="listitem">Should display the errors in error div if the server sent any error.</li>
                     <li class="listitem">Register() calls /v1/register with all the data needed for registration.</li>
                     <li class="listitem">Facebookregister with facebook() calls /v1/register with all the data needed for facebook
                        registration.
                     </li>
                     <li class="listitem">[ Must be implemented!! ] Should registering with google account.</li>
                     <li class="listitem">GetCookie extracts the named cookie.</li>
                     <li class="listitem">GetCookie should return empty if there no named cookie.</li>
                     <li class="listitem">[ Must be implemented!! ] User should be able to initiate resending the registration
                        email.
                     </li>
                     <li class="listitem">DigestGetter()getDigest should call anchor for digest.</li>
                     <li class="listitem">DigestGetter()getDigest should display an error message if predigest field doesn't
                        contain any value.
                     </li>
                     <li class="listitem">DigestGetter().idCallback() should display the error message sent by the server.</li>
                     <li class="listitem">DigestGetter().idCallback() should put the digest into the digest input field, and
                        display the success message.
                     </li>
                     <li class="listitem">ChangeHash() should call '/v1/users/me/update hash' to initiate changing the hash.</li>
                     <li class="listitem">HashCallback() should display the error message sent by the server.</li>
                     <li class="listitem">If the server's response is 200, hashCallback() should display the success message,
                        and close button callback should be 'refreshMe' .
                     </li>
                     <li class="listitem">RefreshMe() should call '/v1/users/me' trough AJAX for user's data.</li>
                     <li class="listitem">If the server's response is 200, refreshCallback() should refresh the user data container.</li>
                     <li class="listitem">RefreshCallback() should display the error message responsed by the server if the
                        status is not equal 200.
                     </li>
                     <li class="listitem">Error message should be displayed if the email field is empty.</li>
                     <li class="listitem">[ Must be implemented!! ] User should be able to initiate resending the registration
                        email.
                     </li>
                     <li class="listitem">RemoveCredential().doRemove should call '/v1/remove credential' to initiate removing
                        the credential.
                     </li>
                     <li class="listitem">Credential callback should display error messages if they came from the server.</li>
                     <li class="listitem">Credential callback should display a succes messages and initiate to refresh the userdata
                        container trough the close button's callback.
                     </li>
                     <li class="listitem">AddCredential() should send a POST request trough AJAX and callback should be the
                        addCredentialCalback().
                     </li>
                     <li class="listitem">Should initiate an AJAX process to add a password credential with username and password
                        comes from input fields.
                     </li>
                     <li class="listitem">Should initiate an AJAX process to add a facebook credential with fb userid and fb
                        accessToken comes from fb.
                     </li>
                     <li class="listitem">[ Must be implemented!! ] should initiate an AJAX process to add a google credential
                        with google userid and google accessToken comes from google.
                     </li>
                     <li class="listitem">MenuHandler can hide and display the tabs.</li>
                  </ul>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>